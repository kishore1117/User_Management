<div class="main">

  <div class="form-container">
    <h3>‚¨ÜÔ∏èUpload Excel / CSV</h3>

    <div class="upload-area">
      <input type="file" (change)="onFileSelected($event)" accept=".xlsx,.xls,.csv" [disabled]="uploading" />

      <div class="file-info" *ngIf="selectedFile">
        <strong>Selected:</strong> {{ selectedFile.name }}
        ({{ formatFileSize(selectedFile.size) }})
      </div>

      <div class="actions">
        <button type="button" (click)="upload()" [disabled]="uploading || !selectedFile">
          {{ uploading ? 'Uploading...' : 'Upload' }}
        </button>
        <button type="button" (click)="clear()" [disabled]="uploading">
          Clear
        </button>
      </div>

      <div class="progress" *ngIf="uploading">
        <div class="progress-bar" [style.width.%]="progress"></div>
        <div class="progress-label">{{ progress }}%</div>
      </div>

      <p class="note">
        Supported formats: Excel (.xlsx, .xls) and CSV (.csv)
        <br>
        Required columns: name, hostname, ip_address, department
      </p>
    </div>
  </div>

  <div class="form-container">
    <div class="upload-container">
      <h2>üóëÔ∏èBulk Delete users</h2>

      <!-- Department Filter -->
      <div class="filter-section">
        <!-- <label for="departmentSelect">Select Department:</label> -->
        <select id="departmentSelect" [(ngModel)]="selectedDepartment" class="filter-dropdown">
          <option value="">-- Select Department --</option>
          <option *ngFor="let dept of departments" [value]="dept">{{ dept }}</option>
        </select>

        <button class="btn-delete" [disabled]="!selectedDepartment" (click)="openBulkDeleteModal()">
          Delete All in Department
        </button>
      </div>

      <!-- Confirmation Modal -->
      <div class="modal-overlay" *ngIf="showBulkDeleteModal">
        <div class="modal-content">
          <h3>Confirm Bulk Delete</h3>
          <p>
            Are you sure you want to delete all users in
            <strong>{{ selectedDepartment }}</strong> department?
          </p>

          <div class="modal-buttons">
            <button class="btn btn-confirm" (click)="confirmBulkDelete()">Yes, Delete</button>
            <button class="btn btn-cancel" (click)="cancelBulkDelete()">Cancel</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>